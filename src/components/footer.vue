<template>
  <div class="footer">
    <div class="footer-row">
      <div class="footer-col">
        <div id="logo">
          <router-link to="/">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="162.851"
              height="26"
              viewBox="0 0 162.851 28.497"
              id="logo"
            >
              <g id="Gruppe_182" data-name="Gruppe 182" transform="translate(-261.643 -84.971)">
                <path
                  id="Pfad_1920"
                  data-name="Pfad 1920"
                  d="M13.2,3.135h5.414l-4.69-8.09a7.262,7.262,0,0,0,4.061-6.39A7.537,7.537,0,0,0,10.434-18.9H1.62V3.135H6.656v-7.24H9.049ZM6.656-14.178h3.777a2.668,2.668,0,0,1,2.518,2.833,2.668,2.668,0,0,1-2.518,2.833H6.656Zm17.6,11.332H35.427a9.15,9.15,0,0,0,.189-1.889,7.947,7.947,0,0,0-8-8.31,8.07,8.07,0,0,0-8.373,8.31c0,4.69,3.337,8.31,8.719,8.31A7.987,7.987,0,0,0,34.829.333L31.052-1.839a4.11,4.11,0,0,1-3.022,1.2C26.3-.643,24.851-1.209,24.253-2.846Zm-.094-3.526a3.249,3.249,0,0,1,3.431-2.487,3.24,3.24,0,0,1,3.337,2.487Zm25.4-6.233v1.479a5.912,5.912,0,0,0-4.69-1.92c-4.124,0-7.523,3.62-7.523,8.31s3.4,8.31,7.523,8.31a5.912,5.912,0,0,0,4.69-1.92V3.135h4.722V-12.6ZM45.815-.895a3.594,3.594,0,0,1-3.746-3.84,3.594,3.594,0,0,1,3.746-3.84,3.594,3.594,0,0,1,3.746,3.84A3.594,3.594,0,0,1,45.815-.895ZM69.172-18.9v7.775a5.912,5.912,0,0,0-4.69-1.92c-4.124,0-7.523,3.62-7.523,8.31s3.4,8.31,7.523,8.31a5.912,5.912,0,0,0,4.69-1.92V3.135h4.722V-18.9ZM65.426-.895a3.594,3.594,0,0,1-3.746-3.84,3.594,3.594,0,0,1,3.746-3.84,3.594,3.594,0,0,1,3.746,3.84A3.594,3.594,0,0,1,65.426-.895ZM81.574-2.846H92.749a9.15,9.15,0,0,0,.189-1.889,7.947,7.947,0,0,0-8-8.31,8.07,8.07,0,0,0-8.373,8.31c0,4.69,3.337,8.31,8.719,8.31A7.987,7.987,0,0,0,92.151.333L88.373-1.839a4.11,4.11,0,0,1-3.022,1.2C83.62-.643,82.172-1.209,81.574-2.846ZM81.48-6.372a3.249,3.249,0,0,1,3.431-2.487,3.24,3.24,0,0,1,3.337,2.487ZM100.335-9.8v-2.8H95.613V3.135h4.722V-3.979c0-3.116,2.77-3.9,4.722-3.588v-5.351A4.727,4.727,0,0,0,100.335-9.8Zm17.155-2.8-2.959,9.632L111.037-12.6h-5.194l6.264,15.015c-.693,1.92-1.731,2.613-3.935,2.613V9.43c4.407.22,7.208-1.763,8.971-6.768L122.527-12.6Z"
                  transform="translate(301.967 104.021)"
                  fill="#00006D"
                />
                <path
                  id="Icon_metro-books"
                  data-name="Icon metro-books"
                  d="M9.056,8.571H3.5a.929.929,0,0,0-.926.926v20.38A.929.929,0,0,0,3.5,30.8H9.056a.929.929,0,0,0,.926-.926V9.5a.929.929,0,0,0-.926-.926Zm9.264,0H12.762a.929.929,0,0,0-.926.926v20.38a.929.929,0,0,0,.926.926H18.32a.929.929,0,0,0,.926-.926V9.5a.929.929,0,0,0-.926-.926ZM24.72,10l-4.964,2.5a.929.929,0,0,0-.41,1.244l8.337,16.546a.929.929,0,0,0,1.244.41l4.964-2.5a.929.929,0,0,0,.41-1.244L25.964,10.414A.929.929,0,0,0,24.72,10Zm4.716,19.874a.926.926,0,1,1-.926-.926A.926.926,0,0,1,29.436,29.878Z"
                  transform="translate(259.071 76.4)"
                  fill="#0294ff"
                />
              </g>
            </svg>
          </router-link>
        </div>
        <div id="copyright">Â© Readery GmbH 2020</div>
      </div>
      <div class="footer-col">
        <router-link to="/about" class="link highlighted">How it works</router-link>
        <router-link to="/plans" class="link highlighted">Pricing</router-link>
        <router-link to="/faq" class="link highlighted">FAQ</router-link>
      </div>
      <div class="footer-col">
        <router-link to="/about" class="link highlighted">Terms of Service</router-link>
        <router-link to="/plans" class="link highlighted">Privacy Policy</router-link>
        <router-link to="/faq" class="link highlighted">Imprint</router-link>
      </div>
      <div class="footer-col">
        <div class="social">
          <a href="#" class="social-icon">
            <img src="../assets/icons-new/footer/instagram.svg" width="20" height="20" />
          </a>
          <a href="#" class="social-icon">
            <img src="../assets/icons-new/footer/twitter.svg" width="20" height="20" />
          </a>
          <a href="#" class="social-icon">
            <img src="../assets/icons-new/footer/facebook.svg" width="20" height="20" />
          </a>
        </div>
        <div id="created">Created in Stuttgart, Germany</div>
      </div>
    </div>
  </div>
</template>

<script>
import axios from "axios";

export default {
  name: "Footer",
  components: {},
  data() {
    return {
      email: null,
      emailError: null,
      successMessage: null,
      loadSpinner: false
    };
  },
  methods: {
    signupSubscriber() {
      //Check if currently loading
      if (this.loadSpinner === false) {
        this.emailError = null;
        this.successMessage = null;

        this.email = this.email.toString().toLowerCase();

        if (this.validateEmail(this.email)) {
          //send request to sign up

          const subscriber = {
            email: this.email,
            time_joined: Date.now()
          };

          this.loadSpinner = true;

          axios
            .post(
              "https://readery-backend.herokuapp.com/api/newsletter/signup",
              subscriber
            )
            .then(response => {
              this.loadSpinner = false;

              if (
                response.data.error !== undefined &&
                response.data.error !== null
              ) {
                //Error
                console.log(
                  "An error occured: " + response.data.error.toString()
                );
                this.emailError = response.data.error;
              } else {
                //Login user
                this.successMessage =
                  this.email + " was added to our subscriber list. Thank you!";
                this.email = "";
              }
            })
            .catch(e => {
              console.log("User creation request Error: " + e.toString());
            });
        } else {
          this.emailError = "Please enter a valid email";
        }
      }
    },
    validateEmail(email) {
      if (email !== null && email !== "") {
        if (/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
          return true;
        }
      }
      return false;
    }
  }
};
</script>

<style scoped>
.footer {
  padding: 0 45px;
  position: relative;
  max-width: 1236px;
  margin: 0 auto 80px auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.footer-row {
  width: 100%;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
}
.footer-col {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: space-between;
  box-sizing: border-box;
  height: 100%;
}

/*Column 1 */
#logo {
  margin-bottom: 32px;
}
#copyright {
  color: #4c5d77;
  font-weight: 300;
  font-size: 14px;
}

/*Column 2 + 3 */
.footer-col a {
  font-size: 16px;
  line-height: 1.5;
  text-decoration: none;
  color: #4c5d77;
}
.footer-col a:hover {
  color: #0294ff;
}
.footer-col a:not(:last-child) {
  margin-bottom: 24px;
}

/*Column 4 */
.footer-col:last-child {
  align-items: flex-end;
}
.social {
  display: flex;
  margin-bottom: 55px;
}
.social-icon {
  cursor: pointer;
  border: 2px solid #d8e8ee;
  border-radius: 100px;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  transition: 0.1s ease-out;
}
.social-icon:hover {
  border: 2px solid #0294ff;
  transition: 0.1s ease-in;
}

.social-icon:not(:last-child) {
  margin-right: 25px;
}
#created {
  color: #0294ff;
  font-size: 14px;
}
</style>
